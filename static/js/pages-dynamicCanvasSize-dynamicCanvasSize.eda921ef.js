(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-dynamicCanvasSize-dynamicCanvasSize"],{"1b8e":function(t,e,n){"use strict";n.r(e);var a=n("5dab"),r=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=r.a},"3cbf":function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"page"},[n("v-uni-view",{staticClass:"page-title h2"},[t._v("动态获取元素尺寸")]),n("v-uni-view",[t._v("对于复杂情况，元素的高度可能不确定，我们需要动态获取元素的尺寸，下面的 DEMO 展示了:"),n("v-uni-view",[t._v("1. 获取元素的高度来设置 canvas 尺寸")]),n("v-uni-view",[t._v("2. 为尺寸不定的元素设置背景色")])],1),n("br"),n("v-uni-textarea",{staticStyle:{border:"1rpx solid #ddd"},attrs:{maxlength:"-1"},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),n("br"),n("v-uni-button",{attrs:{type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.updateCanvas.apply(void 0,arguments)}}},[t._v("更新")]),n("v-uni-canvas",{staticClass:"canvas",style:{width:t.CANVAS_WIDTH+"rpx",height:t.canvasHeight+"rpx"},attrs:{"canvas-id":"canvas",id:"canvas"}}),n("page-source-link")],1)},i=[]},"5dab":function(t,e,n){"use strict";var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var r=a(n("3b8d")),i=a(n("d109")),c="../../static/demo.png",u=500,o={data:function(){return{text:"在这里修改文本的长度，点击更新，查看 canvas 高度变化",CANVAS_WIDTH:u,canvasHeight:0,painterTextBackgroundOption:{}}},computed:{painterContent:function(){return{type:"container",direction:"vertical",height:"auto",left:20,width:u,children:[{type:"image",top:20,width:100,height:100,src:c},this.painterTextBackgroundOption,this.painterTextBlockOption,{type:"rect",top:20,width:300,height:10,background:"#456"},{type:"rect",width:0,height:20}]}},painterTextBlockOption:function(){return{type:"text-block",top:20,width:u-40,height:"auto",fontSize:40,lineHeight:60,fontStyle:"italic",color:"#356",content:this.text}}},onReady:function(){this.updateCanvas()},methods:{scaleChange:function(t){var e=t.detail.value;this.text=e,this.updateCanvas()},updateCanvas:function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.clearCanvas();case 2:return t.next=4,this.getPainterTextBackgroundOption();case 4:return this.painterTextBackgroundOption=t.sent,e=new i.default(uni.createCanvasContext("canvas")),t.next=8,e.layout(this.painterContent);case 8:return n=t.sent,this.canvasHeight=n.height,t.next=12,new Promise((function(t){return setTimeout(t,100)}));case 12:return t.next=14,e.draw(this.painterContent);case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),clearCanvas:function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new i.default(uni.createCanvasContext("canvas")).draw({type:"rect",background:"#fff",width:u,height:this.canvasHeight});case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getPainterTextBackgroundOption:function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new i.default(uni.createCanvasContext("canvas")).layout(this.painterTextBlockOption);case 2:return e=t.sent,t.abrupt("return",{type:"rect",position:"absolute",top:150,left:40,width:u-100,height:e.height,background:"#cff"});case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}};e.default=o},"63cf":function(t,e,n){var a=n("b68b");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var r=n("4f06").default;r("521d6bae",a,!0,{sourceMap:!1,shadowMode:!1})},"652a":function(t,e,n){"use strict";var a=n("63cf"),r=n.n(a);r.a},b68b:function(t,e,n){e=t.exports=n("24fb")(!1),e.push([t.i,".canvas[data-v-71569487]{border:1px solid #000}",""])},cef7:function(t,e,n){"use strict";n.r(e);var a=n("3cbf"),r=n("1b8e");for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);n("652a");var c,u=n("f0c5"),o=Object(u["a"])(r["default"],a["b"],a["c"],!1,null,"71569487",null,!1,a["a"],c);e["default"]=o.exports}}]);