(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-playground-playground"],{"01d0":function(t,e,n){"use strict";n.r(e);var a=n("56a4"),i=n("57d2");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("7a05");var r,s=n("f0c5"),c=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,"23e7841b",null,!1,a["a"],r);e["default"]=c.exports},"0fd5":function(t,e,n){var a=n("caf5");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("79725be8",a,!0,{sourceMap:!1,shadowMode:!1})},"56a4":function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"page"},[n("v-uni-view",{staticClass:"page-title h2"},[t._v("任意编辑配置试试，绘制后可通过 url 来分享！")]),n("v-uni-textarea",{staticClass:"textarea",attrs:{maxlength:"-1"},model:{value:t.elementOptionText,callback:function(e){t.elementOptionText=e},expression:"elementOptionText"}}),n("v-uni-button",{attrs:{accesskey:"s"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.update.apply(void 0,arguments)}}},[t._v("绘制 (alt+s)")]),n("v-uni-view",{staticStyle:{color:"red"}},[t._v(t._s(t.errorMessage))]),n("v-uni-canvas",{staticClass:"canvas",style:{width:t.canvasSize.width+"rpx",height:t.canvasSize.height+"rpx"},attrs:{"canvas-id":"canvas-playground",id:"canvas-playground"}}),n("v-uni-view",{staticStyle:{margin:"10px auto"}},[t._v("layout: "+t._s(t.layoutMessage))]),n("v-uni-button",{attrs:{accesskey:"e"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.exportImage.apply(void 0,arguments)}}},[t._v("导出 (alt+e)")]),n("page-source-link")],1)},o=[]},"57d2":function(t,e,n){"use strict";n.r(e);var a=n("8ff1"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},"7a05":function(t,e,n){"use strict";var a=n("0fd5"),i=n.n(a);i.a},"8ff1":function(t,e,n){"use strict";var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var i=a(n("3b8d")),o=a(n("d109")),r={type:"container",direction:"vertical",top:10,left:10,children:[{type:"text",fontFamily:"times",content:"Hello, World!",fontStyle:"italic",color:"#456"},{type:"rect",top:5,background:"#456",width:80,height:3},{type:"image",src:"/static/demo.png",width:100,height:60,top:10,objectFit:"cover",objectPosition:["center","top"]},{type:"rect",height:10}]},s={onLoad:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.d,n=void 0===e?encodeURIComponent(JSON.stringify(r)):e,a=decodeURIComponent(n);try{this.elementOption=JSON.parse(a)}catch(i){this.elementOptionText=a}this.draw()},data:function(){return{canvasSize:{width:600,height:0},elementOptionText:"",errorMessage:"",layoutMessage:""}},computed:{elementOption:{get:function(){try{return JSON.parse(this.elementOptionText)}catch(t){return{type:"text",fontSize:18,content:t.message,color:"red"}}},set:function(t){this.elementOptionText=JSON.stringify(t,null,2)}}},methods:{validJson:function(){try{JSON.parse(this.elementOptionText)}catch(t){throw this.errorMessage=t.message,t}},update:function(){this.validJson();var t,e,n=JSON.stringify(this.elementOption);t=this.$route.path,e=uni.navigateTo,e.call(null,{url:t+"?d="+encodeURIComponent(n)})},draw:function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.validJson(),e=new o.default(uni.createCanvasContext("canvas-playground")),t.next=4,e.layout(this.elementOption);case 4:return n=t.sent,this.layoutMessage="width=".concat(n.width,", height=").concat(n.height),this.canvasSize.height=n.height+(this.elementOption.top||0),t.next=9,new Promise((function(t){return setTimeout(t,100)}));case 9:return t.next=11,e.draw(this.elementOption);case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),exportImage:function(){var t=function(t){var e=document.createElement("a");e.href=t,e.download="mp-painter-playground-export.jpg",e.click()};uni.canvasToTempFilePath({canvasId:"canvas-playground",fileType:"jpg",width:uni.upx2px(this.canvasSize.width),height:uni.upx2px(this.canvasSize.height),success:function(e){var n=e.tempFilePath;t(n)}})}}};e.default=s},caf5:function(t,e,n){e=t.exports=n("24fb")(!1),e.push([t.i,".textarea[data-v-23e7841b]{background:#222;width:auto;height:400px;padding:10px;color:#eee;font-family:consolas;margin-bottom:10px}",""])}}]);